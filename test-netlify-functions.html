<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <title>Test Netlify Functions</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 2rem auto; padding: 1rem; }
        .test-section { background: #f8f9fa; padding: 1rem; margin: 1rem 0; border-radius: 6px; }
        .result { background: #e9ecef; padding: 0.5rem; margin: 0.5rem 0; border-radius: 4px; font-family: monospace; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        button { padding: 0.5rem 1rem; margin: 0.25rem; cursor: pointer; }
    </style>
</head>
<body>
    <h1>🧪 Test Netlify Functions</h1>
    
    <div class="test-section">
        <h3>Test get-blog-posts</h3>
        <button onclick="testGetPosts()">Test Get Posts</button>
        <div id="get-posts-result" class="result"></div>
    </div>

    <div class="test-section">
        <h3>Test get-config</h3>
        <button onclick="testGetConfig()">Test Get Config</button>
        <div id="get-config-result" class="result"></div>
    </div>

    <script>
        async function testGetPosts() {
            const resultDiv = document.getElementById('get-posts-result');
            resultDiv.textContent = '⏳ Testing...';
            
            try {
                const response = await fetch('/.netlify/functions/get-blog-posts');
                const data = await response.json();
                
                if (response.ok) {
                    resultDiv.className = 'result success';
                    resultDiv.textContent = `✅ Success: Found ${data.length} posts\n${JSON.stringify(data, null, 2)}`;
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.textContent = `❌ Error: ${response.status}\n${JSON.stringify(data, null, 2)}`;
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `❌ Network Error: ${error.message}`;
            }
        }

        async function testGetConfig() {
            const resultDiv = document.getElementById('get-config-result');
            resultDiv.textContent = '⏳ Testing...';
            
            try {
                const response = await fetch('/.netlify/functions/get-config');
                const data = await response.json();
                
                if (response.ok) {
                    resultDiv.className = 'result success';
                    resultDiv.textContent = `✅ Success: Config loaded\n${JSON.stringify(data, null, 2)}`;
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.textContent = `❌ Error: ${response.status}\n${JSON.stringify(data, null, 2)}`;
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `❌ Network Error: ${error.message}`;
            }
        }

        // Auto-test on load
        window.addEventListener('load', () => {
            testGetConfig();
            setTimeout(testGetPosts, 1000);
        });
    </script>
</body>
</html>